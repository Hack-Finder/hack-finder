{"ast":null,"code":"var _jsxFileName = \"/Users/florianposchlod/iron-hack/hackathon-finder/client/src/components/UpdateUser.js\";\nimport React, { Component } from 'react';\nimport { sendFormData } from '../services/sendFormData';\nimport { Link } from 'react-router-dom';\nimport { deleteUser } from '../services/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class UpdateUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: this.props.user.username,\n      email: this.props.user.email,\n      description: 'Describe yourself ...',\n      avatar: '',\n      errMessage: '',\n      showError: false,\n      showAvatar: false\n    };\n\n    this.componentDidMount = () => {\n      this.setState(this.props.user);\n    };\n\n    this.showErrorHandler = ev => {\n      this.setState({\n        errMessage: '',\n        showError: false\n      });\n    };\n\n    this.deleteUserHandler = async () => {\n      try {\n        const response = await deleteUser(this.props.user._id);\n\n        if (response.message) {\n          this.setState({\n            errMessage: response.message,\n            showError: true\n          });\n        } else {\n          this.props.setUser(response.user);\n          this.props.history.push('/');\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.onChangeHandler = ev => {\n      const type = ev.target.type;\n      this.setState({\n        [ev.target.name]: type !== 'checkbox' ? ev.target.value : !this.state[[ev.target.name]]\n      });\n    };\n\n    this.handleImageBanner = ev => {\n      this.setState((state, props) => {\n        return {\n          avatar: ev.target.files[0],\n          showAvatar: !state.showAvatar\n        };\n      });\n    };\n\n    this.onSubmitHandler = ev => {\n      if (ev.target.checkValidity()) {\n        ev.preventDefault();\n        window.scrollTo(0, 0);\n        const formData = new FormData();\n        formData.append('data', JSON.stringify(this.state));\n\n        if (this.state.avatar) {\n          formData.append('avatar', this.state.avatar);\n        }\n\n        sendFormData(formData, `/api/users/${this.props.match.params.id}`, 'PUT').then(response => {\n          if (response.message) {\n            this.setState({\n              errMessage: response.message,\n              showError: true\n            });\n          } else {\n            this.props.setUser(response.user);\n            this.props.history.push('/user');\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.handleFormInput = event => {\n      this.setState(event);\n      this.handleInputConversion();\n    };\n\n    this.handleInputConversion = () => {\n      this.setState((state, prop) => {\n        return {\n          showAvatar: state.avatar !== '' ? true : false\n        };\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onSubmitHandler,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"max-w-5xl mx-auto py-12 px-4 flex flex-col items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              class: \"profile-username text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\",\n              children: \"Edit Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), !this.state.avatar.imgPath && /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"mb-6 mt-8 inline-block h-28 w-28 rounded-full overflow-hidden bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                class: \"h-full w-full text-gray-300\",\n                fill: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this), !this.state.showAvatar && this.state.avatar.imgPath && /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"mb-6 mt-8 inline-block h-28 w-28 rounded-full overflow-hidden bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"h-full w-full rounded-full\",\n                src: this.state.avatar.imgPath,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"avatar\",\n              className: \"mb-2 block text-md font-medium text-gray-700\",\n              children: \"Add new Avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/jpeg, image/jpg, image/png\",\n              onChange: this.handleImageBanner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"max-w-3xl mx-auto flex flex-col bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"text-gray-500 pt-0 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"username\",\n                className: \"mb-2 block text-md font-medium text-gray-700\",\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                class: \"w-full h-10 px-2 text-md text-gray-500 placeholder-gray-300 border rounded-lg focus:shadow-outline\",\n                name: \"username\",\n                type: \"text\",\n                placeholder: \"Username\",\n                value: this.state.username,\n                onChange: this.onChangeHandler,\n                required: \"required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"title\",\n                className: \"mt-4 mb-2 block text-md font-medium text-gray-700\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: this.onChangeHandler,\n                className: \"w-full h-10 px-2 text-md text-gray-500 placeholder-gray-300 border rounded-lg focus:shadow-outline\",\n                name: \"email\",\n                type: \"email\",\n                placeholder: \"Email\",\n                value: this.state.email,\n                required: \"required\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"description\",\n                className: \"mt-4 mb-2 block text-md font-medium text-gray-700\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                onChange: this.onChangeHandler,\n                value: this.state.description,\n                className: \"w-full h-32 px-3 py-2 text-base text-gray-700 placeholder-gray-600 border rounded-lg focus:shadow-outline\",\n                name: \"description\",\n                id: \"\",\n                cols: \"30\",\n                rows: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mt-3 text-center sm:text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  class: \"text-lg leading-6 font-medium text-gray-900\",\n                  id: \"modal-headline\",\n                  children: \"Deactivate account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: this.deleteUserHandler,\n                    type: \"button\",\n                    class: \"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm\",\n                    children: \"Deactivate\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-t border-gray-200\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-10\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mx-auto\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1/2\",\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          to: \"/profile\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"btn-prev w-32 focus:outline-none px-5 py-3 rounded-lg text-base font-medium text-center text-gray-600 bg-white hover:bg-gray-100 border\",\n                            children: \"Cancel\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 184,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 183,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1/2 text-right mb-6\",\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn-next w-42 focus:outline-none border border-transparent px-5 py-3 rounded-lg text-center text-white bg-indigo-600 hover:bg-indigo-700 text-base font-medium\",\n                          children: \"Update Profile\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 191,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/Users/florianposchlod/iron-hack/hackathon-finder/client/src/components/UpdateUser.js"],"names":["React","Component","sendFormData","Link","deleteUser","UpdateUser","state","username","props","user","email","description","avatar","errMessage","showError","showAvatar","componentDidMount","setState","showErrorHandler","ev","deleteUserHandler","response","_id","message","setUser","history","push","err","console","log","onChangeHandler","type","target","name","value","handleImageBanner","files","onSubmitHandler","checkValidity","preventDefault","window","scrollTo","formData","FormData","append","JSON","stringify","match","params","id","then","catch","handleFormInput","event","handleInputConversion","prop","render","imgPath"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { sendFormData } from '../services/sendFormData';\nimport { Link } from 'react-router-dom';\nimport { deleteUser } from '../services/user';\n\nexport default class UpdateUser extends Component {\n  state = {\n    username: this.props.user.username,\n    email: this.props.user.email,\n    description: 'Describe yourself ...',\n    avatar: '',\n    errMessage: '',\n    showError: false,\n    showAvatar: false,\n  };\n\n  componentDidMount = () => {\n    this.setState(this.props.user);\n  };\n\n  showErrorHandler = (ev) => {\n    this.setState({ errMessage: '', showError: false });\n  };\n\n  deleteUserHandler = async () => {\n    try {\n      const response = await deleteUser(this.props.user._id);\n      if (response.message) {\n        this.setState({ errMessage: response.message, showError: true });\n      } else {\n        this.props.setUser(response.user);\n        this.props.history.push('/');\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  onChangeHandler = (ev) => {\n    const type = ev.target.type;\n\n    this.setState({\n      [ev.target.name]: type !== 'checkbox' ? ev.target.value : !this.state[[ev.target.name]],\n    });\n  };\n\n  handleImageBanner = (ev) => {\n    this.setState((state, props) => {\n      return {\n        avatar: ev.target.files[0],\n        showAvatar: !state.showAvatar,\n      };\n    });\n  };\n\n  onSubmitHandler = (ev) => {\n    if (ev.target.checkValidity()) {\n      ev.preventDefault();\n      window.scrollTo(0, 0);\n      const formData = new FormData();\n      formData.append('data', JSON.stringify(this.state));\n      if (this.state.avatar) {\n        formData.append('avatar', this.state.avatar);\n      }\n\n      sendFormData(formData, `/api/users/${this.props.match.params.id}`, 'PUT')\n        .then((response) => {\n          if (response.message) {\n            this.setState({ errMessage: response.message, showError: true });\n          } else {\n            this.props.setUser(response.user);\n            this.props.history.push('/user');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n\n  handleFormInput = (event) => {\n    this.setState(event);\n    this.handleInputConversion();\n  };\n\n  handleInputConversion = () => {\n    this.setState((state, prop) => {\n      return {\n        showAvatar: state.avatar !== '' ? true : false,\n      };\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <form onSubmit={this.onSubmitHandler}>\n          <div class=\"bg-white\">\n            <div class=\"max-w-5xl mx-auto py-12 px-4 flex flex-col items-center\">\n              <h2 class=\"profile-username text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n                Edit Profile\n              </h2>\n              {!this.state.avatar.imgPath && (\n                <span class=\"mb-6 mt-8 inline-block h-28 w-28 rounded-full overflow-hidden bg-gray-100\">\n                  <svg class=\"h-full w-full text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z\"></path>\n                  </svg>\n                </span>\n              )}\n\n              {!this.state.showAvatar && this.state.avatar.imgPath && (\n                <span class=\"mb-6 mt-8 inline-block h-28 w-28 rounded-full overflow-hidden bg-gray-100\">\n                  <img class=\"h-full w-full rounded-full\" src={this.state.avatar.imgPath} alt=\"\"></img>\n                </span>\n              )}\n\n              <label htmlFor=\"avatar\" className=\"mb-2 block text-md font-medium text-gray-700\">\n                Add new Avatar\n              </label>\n\n              <input type=\"file\" accept=\"image/jpeg, image/jpg, image/png\" onChange={this.handleImageBanner} />\n            </div>\n            <div class=\"max-w-3xl mx-auto flex flex-col bg-white\">\n              <div class=\"text-gray-500 pt-0 rounded\">\n                <label htmlFor=\"username\" className=\"mb-2 block text-md font-medium text-gray-700\">\n                  Username\n                </label>\n                <input\n                  class=\"w-full h-10 px-2 text-md text-gray-500 placeholder-gray-300 border rounded-lg focus:shadow-outline\"\n                  name=\"username\"\n                  type=\"text\"\n                  placeholder=\"Username\"\n                  value={this.state.username}\n                  onChange={this.onChangeHandler}\n                  required=\"required\"\n                />\n                <label htmlFor=\"title\" className=\"mt-4 mb-2 block text-md font-medium text-gray-700\">\n                  Email\n                </label>\n                <input\n                  onChange={this.onChangeHandler}\n                  className=\"w-full h-10 px-2 text-md text-gray-500 placeholder-gray-300 border rounded-lg focus:shadow-outline\"\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  value={this.state.email}\n                  required=\"required\"\n                ></input>\n                <label htmlFor=\"description\" className=\"mt-4 mb-2 block text-md font-medium text-gray-700\">\n                  Description\n                </label>\n                <textarea\n                  onChange={this.onChangeHandler}\n                  value={this.state.description}\n                  className=\"w-full h-32 px-3 py-2 text-base text-gray-700 placeholder-gray-600 border rounded-lg focus:shadow-outline\"\n                  name=\"description\"\n                  id=\"\"\n                  cols=\"30\"\n                  rows=\"10\"\n                ></textarea>\n\n                <div class=\"mt-3 text-center sm:text-left\">\n                  <h3 class=\"text-lg leading-6 font-medium text-gray-900\" id=\"modal-headline\">\n                    Deactivate account\n                  </h3>\n                  <div class=\"mt-2\">\n                    <button\n                      onClick={this.deleteUserHandler}\n                      type=\"button\"\n                      class=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm\"\n                    >\n                      Deactivate\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div className=\"py-5\">\n                <div className=\"border-t border-gray-200\">\n                  <div className=\"mt-10\">\n                    <div className=\"mx-auto\">\n                      <div className=\"flex\">\n                        <div className=\"w-1/2\">\n                          <Link to=\"/profile\">\n                            <div className=\"btn-prev w-32 focus:outline-none px-5 py-3 rounded-lg text-base font-medium text-center text-gray-600 bg-white hover:bg-gray-100 border\">\n                              Cancel\n                            </div>\n                          </Link>\n                        </div>\n\n                        <div className=\"w-1/2 text-right mb-6\">\n                          <button className=\"btn-next w-42 focus:outline-none border border-transparent px-5 py-3 rounded-lg text-center text-white bg-indigo-600 hover:bg-indigo-700 text-base font-medium\">\n                            Update Profile\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}